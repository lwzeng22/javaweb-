(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e647bd3a"],{"4de4":function(t,e,n){"use strict";var a=n("23e7"),o=n("b727").filter,i=n("1dde"),l=i("filter");a({target:"Array",proto:!0,forced:!l},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},"9e8e":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-row",{staticClass:"mb8",attrs:{gutter:10}},[n("el-col",{attrs:{span:1.5}},[n("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"mini"},on:{click:t.handleAdd}},[t._v("新增 ")])],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.bookList}},[n("el-table-column",{attrs:{label:"姓名",align:"center",prop:"name"}}),n("el-table-column",{attrs:{label:"学号",align:"center",prop:"isbn"}}),n("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(n){return t.handleUpdate(e.row)}}},[t._v("修改 ")]),n("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(n){return t.handleDelete(e.row)}}},[t._v("删除 ")])]}}])})],1),n("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":t.queryParams.pageNum,"page-size":t.queryParams.pageSize,"page-sizes":[10,20,50],total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handlePageChange}}),n("el-dialog",{attrs:{title:t.title,visible:t.open,width:"50%","append-to-body":""},on:{"update:visible":function(e){t.open=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"90px"}},[n("el-form-item",{attrs:{label:"姓名",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"学号",prop:"isbn"}},[n("el-input",{attrs:{placeholder:"请输入学号"},model:{value:t.form.isbn,callback:function(e){t.$set(t.form,"isbn",e)},expression:"form.isbn"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),n("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)},o=[],i=(n("4de4"),n("d3b7"),n("b775"));function l(t){return Object(i["a"])({url:"/project/book/list",method:"get",params:t})}function r(t){return Object(i["a"])({url:"/project/book/detil",method:"post",data:t})}function s(t){return Object(i["a"])({url:"/project/book/add",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/project/book/edit",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/project/book/del",method:"post",data:t})}var d={name:"Book",data:function(){return{loading:!0,total:0,bookList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,name:null,title:null,author:null,publicationDate:null,isbn:null,pic:null,content:null},form:{},rules:{}}},created:function(){this.getList()},methods:{handlePageChange:function(t){this.queryParams.pageNum=t,this.getList()},handleSizeChange:function(t){this.queryParams.pageSize=t,this.getList()},getList:function(){var t=this;this.loading=!0,l(this.queryParams).then((function(e){var n,a,o;a=(t.queryParams.pageNum-1)*t.queryParams.pageSize,o=a+t.queryParams.pageSize,n=e.data.filter((function(t,e){return e>=a&&e<o})),t.bookList=n,t.total=e.data.length,t.loading=!1}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,name:null,title:null,author:null,publicationDate:null,isbn:null,pic:null,content:null}},handleAdd:function(){this.reset(),this.open=!0,this.title="添加图书信息"},handleUpdate:function(t){var e=this;this.reset(),r(t).then((function(t){e.form=t.data,e.open=!0,e.title="修改图书信息"}))},submitForm:function(){var t=this;this.$refs["form"].validate((function(e){e&&(null!=t.form.id?u(t.form).then((function(e){t.$message.success("修改成功"),t.open=!1,t.getList()})):s(t.form).then((function(e){t.$message.success("新增成功"),t.open=!1,t.getList()})))}))},handleDelete:function(t){var e=this;this.$confirm("是否确认删除？").then((function(){return c(t)})).then((function(){e.getList(),e.$message.success("删除成功")})).catch((function(){}))}}},p=d,m=n("2877"),f=Object(m["a"])(p,a,o,!1,null,null,null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-e647bd3a.50ce87ce.js.map